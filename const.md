# const那些事

## 1.const含义

| 常类型                 | 即用类型修饰符const说明的类型 |
| ---------------------- | ----------------------------- |
| 常类型的变量或对象的值 | 不能被更新                    |

## 2.const作用

| const作用                             | 描述                                                         | 例子                                |
| ------------------------------------- | ------------------------------------------------------------ | ----------------------------------- |
| 1. 可以定义常量                       |                                                              | const int a=100;                    |
| 2. 用于类型检查                       | const常量与#define宏定义常量的区别：const常量具有**类型**，编译器可以进行安全检查；#define宏定义没有数据类型，只是简单的字符串替换，不能进行安全检查。 |                                     |
|                                       | const 定义的变量只有类型为整数或枚举，且以常量表达式初始化时才能**作为常量表达式**。其他情况下它只是一个 const 限定的变量，不要将与常量混淆。 |                                     |
| 3. 防止修改，保护作用，增加程序健壮性 |                                                              | void f(const int i){ i++; //error!} |
| 4. 节省空间，避免**不必要的内存分配** | const定义常量从汇编的角度来看，只是给出了对应的内存地址，而不是像#define一样给出的是立即数，所以，const定义的常量在程序运行过程中只有一份拷贝，而#define定义的常量在内存中有若干个拷贝。 |                                     |

## 3. const对象默认为*局部变量*

> 注意：非const变量默认为extern。**要使const变量能够在其他文件中访问，必须在文件中显式地指定它为extern**。

小结：可以发现未被const修饰的变量不需要extern显式声明！而const常量需要显式声明extern，并且需要做初始化！因为常量在定义后就不能被修改，所以定义时必须初始化

## 4.定义常量

注意：第一：const常量，不可更改！第二：定义的const常量，必须进行初始化！(**因为常量在定义后就不能被修改，所以定义时必须初始化**。)

## 5.指针和const

| 类型                  | 说明                                                    | 注意点 |
| --------------------- | ------------------------------------------------------- | ------ |
| const char * a;       | //指向const对象的指针或者说**指向常量的指针**。         |        |
| char const * a;       | //**同上**                                              |        |
| char * const a; /     | /指向类型对象的const指针。或者说**常指针、const指针**。 |        |
| const char * const a; | //**指向const对象的const指针**。                        |        |

小结：如果const位于`*`的左侧，则const就是用来修饰指针所指向的变量，即**指针指向为常量**；如果const位于`*`的右侧，const就是修饰指针本身，即**指针本身是常量**。

### 指向常量的指针：

小结：对于指向常量的指针，**不能通过指针来修改对象的值**。
也**不能使用void`*`指针保存const对象的地址**，必须使用const void`*`类型的指针保存const对象的地址。
允许把非const对象的地址赋值给const对象的指针，如果要修改指针所指向的对象值，必须通过其他方式修改，不能直接通过当前指针直接修改。

### 常指针：

const指针必须进行初始化，且const指针的值不能修改。

## 6.函数中使用const

